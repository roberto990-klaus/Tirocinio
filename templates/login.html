<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form di login</title>
    <link rel="stylesheet" href="../static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../static/passaggioForm.js" defer></script>
    <script src="../static/alertLogin.js" defer></script>
    <script src="../static/alertRegistrazione.js" defer></script>
    <script src="../static/recuperoCodiceFiscale.js" defer></script>
    <script src="../static/language.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

    

    <div id="formLoginRegister">

        <div id="language-buttons-container">
            <div id="language-buttons">
                <div class="dropdown">
                    <button class="dropbtn" onclick="toggleDropdown()" >
                        <span id="seleziona_lingua">Seleziona la lingua</span>
                    </button>
                    <div class="dropdown-content" id="languageDropdown">
                        <button data-lang="en" onclick="selectLanguage('en')">English</button>
                        <button data-lang="it" onclick="selectLanguage('it')">Italiano</button>
                    </div>
                </div>
            </div>
        </div>

        <form action="/login" method="post" id="formLogin">
            <!--alert per l'errore di login-->
            <div id="error-alert-login" class="alert alert-danger" role="alert" style="display: none;">
                <p id="error-message-login"></p>
            </div>


            <h1 id="titolo_pagina">Accedi</h1>
            <div id="input-box">
                <label for="email">Email:</label><br>
                <input type="text" id="email_login" name="email_login" placeholder="Inserisci la tua email" required>
            </div>

            <div id="input-box">
                <label for="password">Password:</label><br>
                <input type="password" id="password_login" name="password_login" placeholder="Inserisci la tua password" required>
            </div>

            <div id="remember-forgot">
                <label>
                    <input type="checkbox" id="checkbox_1">
                    <span id="ricorda_password">Ricordami</span>
                </label>
                <a href="#" id="linkPasswordDimenticata">Password dimenticata?</a>
            </div>
            <button style="display: flex; justify-content: center; " type="submit" id="btnLogin">
            <span id="btnLogin_label">Accedi</span>
            </button>

            <div id="linkRegistrazione">
                <p>
                    <span id="registrazione_text">Non hai un account?</span>
                    <a href="#" id="registrazione_link">Registrati</a>
                </p>
            </div>
        </form>


        <!--Form per il recupero della password-->



        <form action="/recupera_password" method="post" id="formRecuperoPassword" style="display: none;">
            <div id="success-alert-recupero" class="alert alert-success" role="alert" style="display: none;">
                <p id="success-message-recupero"></p>
            </div>
            <div id="error-alert-recupero" class="alert alert-danger" role="alert" style="display: none;">
                <p id="error-message-recupero"></p>
            </div>
            <h1 id="recupera_password">Recupera Password</h1>
            <div id="input-box">
                <label for="email">Email:</label><br>
                <input type="email" id="email_recupero_password" name="email_recupero_password" placeholder="Inserisci la tua email" required>
            </div>

            <button style="display: flex; justify-content: center; " type="submit" id="btnRecuperaPassword">
                <span id="btnrecupera_password" >Recupera password</span>
            </button>
            <div id="linkAccedi2">
                <p> 
                    <a href="#" id="torna_login">Torna alla schermata di login</a>
                </p>
            </div>
        </form>





        
        <form action="/register" method="post" id="formRegister">
            <!--Impostiamo due alert nascosti, che serviranno per il form registrazione-->   
            <div id="success-alert" class="alert alert-success" role="alert" style="display: none;">
                <p id="success-message"></p>
            </div>

            <div id="error-alert" class="alert alert-danger" role="alert" style="display: none;">
                <p id="error-message"></p>
            </div>
            
            <h1 id="titolo_pagina2">Registrazione</h1>
            <div id="input-box" class="row">
                <div class="col">
                    <label for="nome">
                        <span id="titolo_nome">Nome:</span>
                    </label>
                    <br>
                    <input type="text" id="nome" name="nome" placeholder="Inserisci il tuo nome" required>
                </div>
                <div class="col">
                    <label for="cognome">
                        <span id="titolo_cognome">Cognome:</span>
                    </label>
                    <br>
                    <input type="text" id="cognome" name="cognome" placeholder="Inserisci il tuo cognome" required>
                </div>
            </div>
        
            <div id="input-box" class="genere-input">
                <label>
                    <span id="sesso">Sesso:</span>
                </label>
                <br>
                <div class="genere-btn">
                    <input type="radio" id="maschio" name="sesso" value="M" required>
                    <label for="maschio" id="maschio_label">Uomo</label>
                </div>
                <div class="genere-btn">
                    <input type="radio" id="donna" name="sesso" value="F" required>
                    <label for="donna" id="donna_label">Donna</label>
                </div>
            </div>

            <div id="input-box" class="row">
                <div class="col">
                    <label for="luogo_di_nascita">
                        <span id="luogo_nascita">Luogo di nascita:</span>
                    </label>
                    <br>
                    <input type="text" id="luogo_di_nascita" name="luogo_di_nascita" placeholder="Inserisci il luogo di nascita" required>
                </div>
                <div class="col">
                    <label for="data">
                        <span id="data_nascita">Data di nascita:</span>
                    </label>
                    <br>
                    <input type="text" id="data" name="data" placeholder="GG/MM/AAAA" required pattern="\d{2}/\d{2}/\d{4}" oninput="formatDate(this)">

                </div>
            </div>



            <button style="display: flex; justify-content: center;" type="button" id="btnGeneraCodiceFiscale" class="genera-btn">
                <span id="cod_fiscale">Genera Codice Fiscale</span>
            </button>

            <div id="codiceFiscaleContainer" style="display: none;" class="genera-input">
                <label for="codice_fiscale"></label>
                <p id="codiceFiscale"></p>
            </div>

            <div id="error-generazione-cf" class="alert alert-danger" role="alert" style="display: none;">
                Si è verificato un errore durante la generazione del codice fiscale. Assicurati che i dati inseriti siano corretti !!!
            </div>


            <div id="input-box">
                <div class="row">
                    <div class="col">
                        <label for="email">Email:</label><br>
                        <input type="email" id="email" name="email" placeholder="Inserisci la tua email" required>
                    </div>
                    <div class="col">
                        <label for="password">Password:</label><br>
                        <input type="password" id="password" name="password" placeholder="Inserisci la tua password" required>
                    </div>
                </div>
            </div>

            

            <button style="display: flex; justify-content: center; " type="submit" id="btnRegistrazione">
                <span id="button_reg">Registrati</span>
            </button>

            <div id="linkAccedi">
                <p> 
                    <span id="account_esistente">Hai già un account?</span>
                    <a href="#" id="ritorna_login">Accedi</a>
                </p>
            </div>
        </form>
    </div>



    <script>
        function formatDate(input) {
            // Ottieni il valore attuale dell'input
            let value = input.value;
        
            // Rimuovi tutti i caratteri non numerici
            value = value.replace(/\D/g, '');
        
            // Formatta la data inserendo automaticamente lo slash
            if (value.length > 2) {
                value = value.substring(0, 2) + '/' + value.substring(2);
            }
            if (value.length > 5) {
                value = value.substring(0, 5) + '/' + value.substring(5, 9);
            }
        
            // Aggiorna il valore dell'input con la nuova formattazione
            input.value = value;
        }
    </script>
</body>
</html>