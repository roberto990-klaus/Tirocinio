<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modifica Dati Utente</title>
    <link rel="stylesheet" href="../static/style_modifica_dati.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../static/modificaDati.js" defer></script>
    <script src="../static/after_login.js" defer></script>
    <script src="../static/language.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header id="main-header">
        <div class="burger-menu" onclick="toggleMobileMenu()">
            <div class="burger-line"></div>
            <div class="burger-line"></div>
            <div class="burger-line"></div>
        </div>
        <img src="/static/Unimol-logo.png" alt="logo">
        {% if session.logged_in %}
            <nav class="barra_navigazione">
                <a href="after_login.html">Home</a>
                <a id="nav_visualizza" href="visualizzanalisi.html">Visualizza analisi</a>
                <a id="nav_modifica" href="modifica_dati.html">Modifica dati</a>
                <a id="nav_info" href="infopage.html">Dettagli</a>
                <a id="nav_canc" href="elimina_dati.html">Elimina</a>
                <a href="{{ url_for('logout') }}" id="btnlogout">
                    <span id="nav_esci">Logout</span>
                </a>
            </nav>
            {% else %}
            <!-- L'utente non Ã¨ loggato, reindirizzalo alla pagina di login -->
            <script>window.location = "{{ url_for('errorpage') }}";</script>
            {% endif %}

        <div id="language-buttons-mobile">
            <div class="dropdown">
                <button class="dropbtn" onclick="toggleDropdownMobile()">
                    <span id="seleziona_lingua_mobile">Seleziona la lingua</span>
                </button>
                <div class="dropdown-content" id="languageDropdownMobile">
                    <button data-lang="en" onclick="selectLanguage('en')">English</button>
                    <button data-lang="it" onclick="selectLanguage('it')">Italiano</button>
                </div>
            </div>
        </div>


        <div id="mobileMenu" class="mobile-menu">
            <a  href="after_login.html">Home</a>
            <a id="nav_visualizza_mobile" href="visualizzanalisi.html">Visualizza analisi</a>
            <a id="nav_modifica_mobile" href="modifica_dati.html">Modifica dati</a>
            <a id="nav_info_mobile" href="infopage.html">Dettagli</a>
            <a id="nav_canc_mobile" href="elimina_dati.html">Elimina</a>
            <a href="login">
                <span>Logout</span>
            </a>
        </div>

    </header>

    <div id="language-buttons-container">
        <div id="language-buttons">
            <div class="dropdown">
                <button class="dropbtn" onclick="toggleDropdown()" >
                    <span id="seleziona_lingua">Seleziona la lingua</span>
                </button>
                <div class="dropdown-content" id="languageDropdown">
                    <button data-lang="en" onclick="selectLanguage('en')">English</button>
                    <button data-lang="it" onclick="selectLanguage('it')">Italiano</button>
                </div>
            </div>
        </div>
    </div>
     
    <form action="/modifica_dati.html" method="post" id="formModificaDati">
            
        <!-- Impostiamo due alert nascosti, che serviranno per l'eliminazione dell'account -->   
        <div id="success-alert-modifica" class="alert alert-success" role="alert" style="display: none;">
            <p id="success-message-modifica"></p>
        </div>
        <div id="error-alert-modifica" class="alert alert-danger" role="alert" style="display: none;">
            <p id="error-message-modifica"></p>
        </div>

        
        <div id="info-utente">
            <!-- Qui verranno visualizzati i dati dell'utente tramite JavaScript -->
        </div>

        <h1 id="titolo_modifica">Modifica i tuoi dati</h1>

        <div id="input-box">
            <label for="email">
                <span id="inserisci_email">Inserisci la tua email per poter modificare i tuoi dati:</span>
            </label>
            <br>
            <input type="text" id="email" name="email" placeholder="Inserisci la tua email" required>
        </div>

        <div id="input-box">
            <label for="password">
                <span id="inserisci_password">Inserisci la tua password per poter modificare i tuoi dati:</span>
            </label>
            <br>
            <input type="password" id="password" name="password" placeholder="Inserisci la tua password" required>
        </div>

        <div id="input-box">
            <label for="nuovo_nome">
                <span id="titolo_nuovo_nome">Nuovo nome:</span>
            </label>
            <br>
            <input type="text" id="nuovo_nome" name="nuovo_nome" placeholder="Inserisci il nuovo nome">
        </div>

        <div id="input-box">
            <label for="nuovo_cognome">
                <span id="titolo_nuovo_cognome">Nuovo cognome:</span>
            </label>
            <br>
            <input type="text" id="nuovo_cognome" name="nuovo_cognome" placeholder="Inserisci il nuovo cognome">
        </div>

        <div id="input-box">
            <label for="nuova_data">
                <span id="titolo_nuova_data">Nuova Data di nascita:</span>
            </label>
            <br>
            <input type="date" id="nuova_data" name="nuova_data" placeholder="Inserisci una nuova data di nascita" max="9999-12-31">
        </div>

        <div id="input-box">
            <label for="nuovo_codice_fiscale">
                <span id="titolo_nuovo_cf">Nuovo Codice Fiscale:</span>
            </label>
            <br>
            <input type="text" id="nuovo_codice_fiscale" name="nuovo_codice_fiscale" placeholder="Inserisci il nuovo codice fiscale">
        </div>

        <div id="input-box">
            <label for="nuova_password">
                <span id="titolo_nuova_password">Nuova Password:</span>
            </label>
            <br>
            <input type="password" id="nuova_password" name="nuova_password" placeholder="Inserisci la nuova password">
        </div>

        <button style="display: flex; justify-content: center;" type="submit" id="btnModificaDati">
            <span id="salva_modifiche">Salva Modifiche</span>
        </button>
    </form>
</body>
</html>
