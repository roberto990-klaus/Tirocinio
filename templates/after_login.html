<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfaccia Utente</title>
    <link rel="stylesheet" href="../static/style_after_login.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../static/after_login.js" defer></script>
    <script src="../static/language.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <div class="burger-menu" onclick="toggleMobileMenu()">
            <div class="burger-line"></div>
            <div class="burger-line"></div>
            <div class="burger-line"></div>
        </div>
        <img src="/static/Unimol-logo.png" alt="logo">
        {% if session.logged_in %}
            <nav class="barra_navigazione">
                <a href="after_login.html">Home</a>
                <a id="nav_visualizza" href="visualizzanalisi.html">Visualizza analisi</a>
                <a id="nav_modifica" href="modifica_dati.html">Modifica dati</a>
                <a id="nav_info" href="infopage.html">Dettagli</a>
                <a id="nav_canc" href="elimina_dati.html">Elimina</a>
                <a href="{{ url_for('logout') }}" id="btnlogout">
                    <span id="nav_esci">Logout</span>
                </a>
            </nav>
            {% else %}
            <!-- L'utente non è loggato, reindirizzalo alla pagina di login -->
            <script>window.location = "{{ url_for('errorpage') }}";</script>
            {% endif %}


        <div id="language-buttons-mobile">
            <div class="dropdown">
                <button class="dropbtn" onclick="toggleDropdownMobile()">
                    <span id="seleziona_lingua_mobile">Seleziona la lingua</span>
                </button>
                <div class="dropdown-content" id="languageDropdownMobile">
                    <button data-lang="en" onclick="selectLanguage('en')">English</button>
                    <button data-lang="it" onclick="selectLanguage('it')">Italiano</button>
                </div>
            </div>
        </div>

        <div id="mobileMenu" class="mobile-menu">
            <a  href="after_login.html">Home</a>
            <a id="nav_visualizza_mobile" href="visualizzanalisi.html">Visualizza analisi</a>
            <a id="nav_modifica_mobile" href="modifica_dati.html">Modifica dati</a>
            <a id="nav_info_mobile" href="infopage.html">Dettagli</a>
            <a id="nav_canc_mobile" href="elimina_dati.html">Elimina</a>
            <a href="login">
                <span>Logout</span>
            </a>
        </div>
    </header>

    <div id="language-buttons-container">
        <div id="language-buttons">
            <div class="dropdown">
                <button class="dropbtn" onclick="toggleDropdown()">
                    <span id="seleziona_lingua">Seleziona la lingua</span>
                </button>
                <div class="dropdown-content" id="languageDropdown">
                    <button data-lang="en" onclick="selectLanguage('en')">English</button>
                    <button data-lang="it" onclick="selectLanguage('it')">Italiano</button>
                </div>
            </div>
        </div>
    </div>

    <form id="imageForm" enctype="multipart/form-data">
        <input type="file" name="file" id="fileInput">
        <button type="submit" id="carica_immagine">Carica immagine</button>

        <div id="loading-spinner" class="loading-spinner">
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
        </div>

        
        <div id="error-alert-invalid-format" class="alert alert-danger" role="alert" style="display: none;">
            <p id="error-message-invalid-extension">Il formato del file non è valido. Si prega di selezionare un file con estensione .jpg, .jpeg, .png o .gif.</p>
        </div>
        

        <div id="error-alert-carica" class="alert alert-danger" role="alert" style="display: none;">
            <p id="error-message-select-image">Si prega di selezionare un'immagine da caricare.</p>
        </div>
        

        <!-- Alert di successo per il caricamento dell'immagine -->
        <div id="success-alert-carica" class="alert alert-success" role="alert" style="display: none;">
            <p>Immagine caricata con successo. Vai nella pagina delle analisi effettuate per visualizzare i risultati.</p>
        </div>
    </form>
</body>
</html>
